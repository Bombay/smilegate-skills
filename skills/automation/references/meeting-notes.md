# 시나리오 2: 회의록 작성

## 개요
- **입력**: Slack 채널명
- **출력**: Confluence에 생성된 회의록 페이지
- **필요 도구**: Slack + Confluence
- **소요 시간**: 약 1~2분
- **예상 시간 절약**: 수작업 ~20분 → 자동화 ~1분 (빈도: 회의 때마다)

## 실행 절차

### Step 1: 채널 선택

AskUserQuestion으로 대상 채널을 확인한다:
```
💬 어떤 Slack 채널의 대화를 회의록으로 정리할까요?

채널 이름을 알려주세요! (예: 프로젝트-A, 기획회의)
```

사용자 입력을 받은 후 채널을 검색한다:
```
mcp__claude_ai_Slack__slack_search_channels(query="{채널명}")
```

여러 채널이 검색되면 선택지를 제공한다:
```
🔍 이런 채널들을 찾았어요!
1. #프로젝트-A (멤버 12명)
2. #프로젝트-A-디자인 (멤버 5명)

어떤 채널인가요?
```

> 사용자에게 보이는 메시지:
> ```
> ⏳ Slack에서 채널을 찾고 있어요...
> ```

### Step 2: 채널 대화 조회

채널의 최근 대화를 조회한다:
```
mcp__claude_ai_Slack__slack_read_channel(channel_id="{채널 ID}", limit=50)
```

> 사용자에게 보이는 메시지:
> ```
> 📋 최근 대화를 가져오고 있어요...
> 📋 {N}개의 메시지를 찾았습니다! 분석하는 중...
> ```

### Step 3: 대화 분석 및 회의록 구조화

조회된 대화를 분석하여 다음 형식으로 정리한다:

```markdown
# 회의록 — {채널명}
> {날짜} | 참여자: {대화에 참여한 사람들}

## 📋 논의 안건
1. {주제 1 요약}
2. {주제 2 요약}

## 💬 주요 논의 내용

### {주제 1}
- {핵심 발언 요약}
- {결정 사항}

### {주제 2}
- {핵심 발언 요약}
- {결정 사항}

## ✅ 결정 사항 (Action Items)
| 항목 | 담당자 | 기한 |
|------|--------|------|
| {할 일 1} | {담당자} | {기한} |

## 📌 다음 단계
- {후속 조치 사항}
```

> **핵심**: 단순 대화 복사가 아닌, **구조화된 회의록**으로 변환하는 것이 와우 포인트

> 사용자에게 보이는 메시지:
> ```
> 📝 대화를 분석하고 회의록을 작성하고 있어요...
> ```

### Step 4: 미리보기 (페이지 생성 전)

**페이지를 만들기 전에 미리보기를 보여준다**:
```
📝 이렇게 정리해봤어요! 한번 확인해주세요:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
회의록 — {채널명}
{날짜} | 참여자: {N}명

📋 논의 안건
1. {주제 1}
2. {주제 2}

✅ Action Items
• {담당자}: {할 일 1}
• {담당자}: {할 일 2}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이대로 위키에 올릴까요?
① 좋아요, 올려주세요!
② 수정할 부분이 있어요
③ 올리지 않고 보기만 할게요
```

AskUserQuestion으로 확인:
- ① → Step 5로 진행
- ② → 수정 사항 반영 후 미리보기 다시 표시
- ③ → 미리보기만 보여주고 종료

### Step 5: Confluence 스페이스 선택 + 페이지 생성

**스페이스 목록을 먼저 조회**한다:
```
mcp__confluence__get_all_spaces()
```

조회된 스페이스를 보여주고 선택받는다:
```
📂 회의록을 작성할 위키를 골라주세요!

1. 개발팀
2. 기획팀
3. 전체 공유

번호로 골라주세요!
```

AskUserQuestion으로 선택 후, 페이지를 생성한다:
```
mcp__confluence__create_page(
  spaceKey="{선택된 스페이스 키}",
  title="회의록 — {채널명} ({날짜})",
  body="{Step 3에서 구조화한 XHTML}"
)
```

> **주의**: Confluence create_page의 body는 Confluence Storage Format (XHTML)이어야 한다.

> 사용자에게 보이는 메시지:
> ```
> 📄 위키에 회의록을 만들고 있어요...
> ```

### Step 6: 결과 안내

```
✨ 완료!

📄 "회의록 — {채널명} ({날짜})" 페이지가 생성되었어요!
🔗 위치: {스페이스명}
👥 참여자: {N}명
📋 안건: {N}개 | ✅ Action Items: {N}개
```

> **참고**: 시간 절약 비교는 SKILL.md Phase 2에서 통합 표시한다.

## 엣지 케이스

- **채널 메시지가 0개인 경우**: "이 채널에는 아직 대화가 없어요! 다른 채널을 선택하시겠어요?"
- **Confluence 스페이스가 0개인 경우**: "접근 가능한 위키가 없어요. 위키 접근 권한을 확인해주세요."
- **채널 검색 결과 0개인 경우**: "그 이름의 채널을 찾지 못했어요. 다른 이름으로 다시 검색해볼까요?"

## 스킬 생성 시 템플릿

**자연어로 작성한다 (MCP 함수명 사용 금지):**

```yaml
---
name: 회의록
description: >
  Slack 채널의 최근 대화를 분석하여 구조화된 회의록을 위키에 자동 작성한다.
triggers:
  - "회의록"
  - "회의록 작성"
  - "meeting notes"
---

# 회의록 작성

Slack 채널의 최근 대화를 분석하여 구조화된 회의록을 위키에 자동 작성한다.

## 실행 절차
1. Slack에서 지정한 채널의 최근 대화 가져오기
2. 대화를 주제별로 분류하고 핵심 내용 추출
3. 결정 사항(Action Items)과 담당자 정리
4. {스페이스명} 위키에 "회의록 — {채널명} ({날짜})" 페이지 생성
```
