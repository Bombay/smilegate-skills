# 시나리오 1: 주간 업무 리포트

## 개요
- **입력**: 사용자의 Jira 계정 정보 (자동)
- **출력**: Confluence에 생성된 주간보고 페이지
- **필요 도구**: Jira + Confluence
- **소요 시간**: 약 1~2분

## 실행 절차

### Step 1: 사용자 정보 확인 (자동, 사용자에게 안 보임)

Jira에서 현재 사용자 정보를 조회한다:
```
mcp__jira__myself()
```
- 응답에서 `displayName`을 확인

> 사용자에게 보이는 메시지:
> ```
> ⏳ Jira에서 정보를 확인하고 있어요...
> ```

### Step 2: 이번 주 티켓 조회

JQL로 이번 주의 내 티켓을 조회한다:
```
mcp__jira__jql_search(jql="assignee = currentUser() AND updated >= startOfWeek() ORDER BY status ASC, updated DESC")
```

> 사용자에게 보이는 메시지:
> ```
> 📋 이번 주 티켓을 찾고 있어요...
> 📋 {N}개의 티켓을 찾았습니다! 정리하는 중...
> ```

조회 결과에서 추출할 정보:
- 티켓 키 (예: PROJ-123)
- 제목
- 상태 (완료/진행중/대기)
- 우선순위

### Step 3: 보고서 구조화

조회된 티켓을 다음 형식으로 정리한다:

```markdown
# 주간 업무 리포트 — {사용자명}
> {이번 주 날짜 범위}

## ✅ 완료 ({N}건)
| 티켓 | 제목 | 우선순위 |
|------|------|---------|
| PROJ-123 | 로그인 버그 수정 | 높음 |

## 🔄 진행중 ({N}건)
| 티켓 | 제목 | 우선순위 | 진행 상황 |
|------|------|---------|----------|
| PROJ-456 | 대시보드 개선 | 보통 | 디자인 검토 중 |

## ⏸️ 대기 ({N}건)
| 티켓 | 제목 | 사유 |
|------|------|------|
| PROJ-789 | API 연동 | 외부 팀 응답 대기 |

## 📊 이번 주 요약
- 완료율: {완료}/{전체} ({퍼센트}%)
- **주요 성과**: {완료 티켓 중 주요 항목 자동 요약}
- **다음 주 전망**: {진행중 티켓 기반 예측}
- **리스크**: {대기 티켓 중 주의 필요 항목}
```

> **결과물 품질**: 단순 티켓 나열이 아닌, 완료율·성과·전망·리스크까지 포함하여
> **바로 상사에게 제출할 수 있는 수준**의 보고서를 만든다. 이것이 와우 포인트.

> 사용자에게 보이는 메시지:
> ```
> 📝 주간보고를 작성하고 있어요...
> ```

### Step 4: 미리보기 (페이지 생성 전)

**페이지를 만들기 전에 미리보기를 보여준다** (안심 + 와우):
```
📝 이렇게 만들어봤어요! 한번 확인해주세요:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
주간 업무 리포트 — {사용자명}
{이번 주 날짜 범위}

✅ 완료 ({N}건)
• PROJ-101 로그인 버그 수정
• PROJ-102 대시보드 디자인 변경
  ...

🔄 진행중 ({N}건)
• PROJ-106 마이페이지 개선 (디자인 검토 중)
  ...

📊 이번 주 요약
• 완료율: {N}/{M} ({P}%)
• 주요 성과: {자동 요약}
• 다음 주 전망: {진행중 기반 예측}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이대로 위키에 올릴까요?
① 좋아요, 올려주세요!
② 수정할 부분이 있어요
③ 올리지 않고 보기만 할게요
```

AskUserQuestion으로 확인:
- ① → Step 5로 진행
- ② → 수정 사항 반영 후 미리보기 다시 표시
- ③ → 미리보기만 보여주고 SKILL.md Phase 2의 결과 확인 단계로 이동

### Step 5: Confluence 스페이스 선택 + 페이지 생성

**스페이스 목록을 먼저 조회**한다:
```
mcp__confluence__get_all_spaces()
```

조회된 스페이스를 보여주고 선택받는다:
```
📂 주간보고를 작성할 위키를 골라주세요!

1. 개발팀
2. 기획팀
3. 전체 공유

번호로 골라주세요!
```

AskUserQuestion으로 선택 후, 페이지를 생성한다:
```
mcp__confluence__create_page(
  spaceKey="{선택된 스페이스 키}",
  title="주간 업무 리포트 — {사용자명} ({날짜})",
  body="{Step 3에서 구조화한 XHTML}"
)
```

> **주의**: Confluence create_page의 body는 Confluence Storage Format (XHTML)이어야 한다.
> 마크다운을 XHTML로 변환하여 전달한다.

> 사용자에게 보이는 메시지:
> ```
> 📄 위키에 페이지를 만들고 있어요...
> ```

### Step 6: 결과 안내

```
✨ 완료!

📄 "주간 업무 리포트 — {사용자명} ({날짜})" 페이지가 위키에 생성되었어요!
🔗 위치: {스페이스명}
📊 내용: 완료 {N}건 / 진행중 {N}건 / 대기 {N}건
```

> **참고**: 시간 절약 비교는 SKILL.md Phase 2에서 통합 표시한다.
> 이 시나리오의 예상 시간: 수작업 ~30분 → 자동화 ~1분 (빈도: 매주)

### 엣지 케이스

- **이번 주 티켓이 0개인 경우**: "이번 주에는 아직 업데이트된 티켓이 없네요! 다른 걸 해볼까요?" → 다른 시나리오 제안
- **Confluence 스페이스가 0개인 경우**: "접근 가능한 위키가 없어요. 위키 접근 권한을 확인해주세요."

## 스킬 생성 시 템플릿

Phase 3에서 이 시나리오를 스킬로 만들 때 사용할 템플릿.
**MCP 함수명을 사용하지 않고 자연어로 작성한다:**

```yaml
---
name: 주간보고
description: >
  Jira에서 이번 주 내 티켓을 조회하여 주간 업무 리포트를 위키에 자동 작성한다.
triggers:
  - "주간보고"
  - "주간 보고"
  - "weekly report"
---

# 주간 업무 리포트

Jira에서 이번 주 내 티켓을 조회하여 주간 업무 리포트를 위키에 자동 작성한다.

## 실행 절차
1. Jira에서 내 정보 확인
2. 이번 주 업데이트된 내 티켓 전체 조회
3. 상태별(완료/진행중/대기)로 분류하여 보고서 작성
4. 주요 성과, 다음 주 전망, 리스크 요약
5. {스페이스명} 위키에 "주간 업무 리포트 — {이름} ({날짜})" 페이지 생성
```
