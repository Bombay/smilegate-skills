# 사용자 자유 시나리오 처리 가이드

## 개요

사용자가 기존 시나리오(주간보고, 회의록, 티켓생성)에 해당하지 않는
자유 형식의 업무를 자동화하고 싶을 때 사용하는 가이드.

## 판단 기준

### 자동화 가능 여부 확인

사용자의 요청을 듣고, 연결된 도구로 가능한지 판단한다:

1. **입력**이 연결된 도구에서 가져올 수 있는 데이터인가?
2. **처리**가 텍스트 분석/정리/요약/분류로 가능한가?
3. **출력**이 연결된 도구에 쓸 수 있는 형태인가?

### 도구별 가능한 작업

| 도구 | 읽기 (입력) | 쓰기 (출력) |
|------|-----------|-----------|
| Jira | 티켓 조회, 프로젝트 정보, 사용자 정보 | 티켓 생성, 상태 변경, 코멘트 추가 |
| Confluence | 페이지 조회, 검색 | 페이지 생성, 페이지 수정, 코멘트 추가 |
| Slack | 채널 읽기, 검색 | 메시지 보내기 |
| BISKIT | 리포트 조회, 데이터셋 쿼리 | (읽기 전용) |
| PPT | — | 발표자료 생성 (python-pptx) |
| Excel | — | 엑셀 파일 생성 (openpyxl) |

## 실행 절차

### Step 1: 요청 분석

사용자의 요청에서 다음을 파악한다:
- **무엇을**: 어떤 데이터를/어떤 결과물을
- **어디서**: 입력 소스 (Jira, Slack, Confluence, BISKIT, 사용자 직접 입력)
- **어디로**: 출력 대상 (Confluence, Jira, Slack, PPT, Excel, 화면 표시)
- **어떻게**: 처리 방식 (분류, 요약, 변환, 집계)

### Step 2: 가능/불가능 판단

**가능한 경우** → Step 3로 진행
```
좋은 아이디어네요! 이건 {도구A}에서 데이터를 가져와서 {도구B}에 결과를 만드는 방식으로 할 수 있어요.
```

**연결되지 않은 도구가 필요한 경우**:
```
이 업무는 {도구명}이 필요한데, 아직 연결이 안 되어 있어요.

두 가지 방법이 있어요:
① 지금 연결하기 → "/connector"를 실행하면 바로 연결할 수 있어요
② 연결된 도구로 대안 찾기 → {연결된 도구}로 비슷하게 할 수 있는 방법을 찾아볼게요

어떻게 하시겠어요?
```

**완전히 불가능한 경우** (어떤 도구로도 불가):
```
이 업무는 지금 연결된 도구로는 자동화하기 어려워요.
대신 비슷한 업무로 이런 건 어떨까요?

{연결된 도구 기반 대안 1~2개 제안}
```

### Step 3: 워크플로우 설계

기존 시나리오 reference 파일과 동일한 패턴으로 워크플로우를 설계한다:

1. 입력 단계 (데이터 가져오기)
2. 처리 단계 (분석/분류/요약)
3. 미리보기 (결과물 확인)
4. 출력 단계 — **사용자 선호와 연결된 도구에 따라 출력 방식 결정**:
   - PPT 요청 → PPT 파일 생성 (발표자료)
   - Excel 요청 → Excel 파일 생성 (데이터 정리)
   - Confluence 연결됨 → 위키 페이지 생성
   - Confluence 미연결 + Slack 연결 → Slack 메시지로 전송
   - Confluence 미연결 + Jira 연결 → Jira 이슈 코멘트로 저장
   - 위 모두 미연결 → 화면에 결과 표시 + "connector로 도구를 연결하세요" 안내
   > **PPT/Excel은 도구 연결과 무관하게 항상 가능** (로컬 파일 생성)

### Step 4: 실행

설계한 워크플로우를 실제로 실행한다.
- 진행 상황을 단계별로 표시
- 출력 전 반드시 미리보기
- 실패 시 사용자 친화적 에러 메시지

## 예시: 사용자 자유 요청 처리

### 예시 1: "스프린트 회고 정리"
- 입력: Jira (스프린트 티켓) + Slack (회고 채널)
- 처리: 완료/미완료 분류, 채널 논의 요약
- 출력: Confluence 페이지
- → weekly-report.md + meeting-notes.md 패턴 조합

### 예시 2: "기획서에서 티켓 추출"
- 입력: Confluence (기획 페이지)
- 처리: 할 일 항목 추출, 티켓으로 분해
- 출력: Jira 티켓 일괄 생성
- → bulk-tickets.md 패턴 활용

### 예시 3: "BISKIT 데이터 보고서"
- 입력: BISKIT (데이터셋 쿼리)
- 처리: 데이터 분석, 차트 설명, 인사이트 추출
- 출력: Confluence 페이지 (연결 시) 또는 화면 표시 (미연결 시)
- → weekly-report.md 출력 패턴 활용

### 예시 4: "스프린트 종합 리뷰" (Jira+BISKIT, Confluence 미연결)
- 입력: Jira (스프린트 티켓) + BISKIT (관련 데이터)
- 처리: 완료/미완료 분류, BISKIT 데이터 인사이트 추출
- 출력: 화면에 종합 리포트 표시
- → Confluence 연결 안내 또는 Jira 코멘트로 저장 제안

### 예시 5: "프로젝트 현황 PPT"
- 입력: Jira (프로젝트 이슈)
- 처리: 완료율 계산, 주요 마일스톤 정리, 리스크 분석
- 출력: PPT 파일 (표지/요약/상세/리스크 슬라이드)
- → Confluence 없이도 발표자료 생성 가능

### 예시 6: "이번 달 작업 내역 엑셀"
- 입력: Jira (월간 티켓)
- 처리: 티켓 목록 정리, 상태별 분류, 담당자별 집계
- 출력: Excel 파일 (헤더/서식/필터 포함)
- → 관리자에게 바로 공유할 수 있는 엑셀 파일

## 주의사항

- 사용자가 설명한 업무를 **과도하게 확장하지 않는다** (말한 범위만 자동화)
- 복잡한 업무는 **단순한 첫 버전**으로 시작하고, 나중에 개선할 수 있다고 안내
- 실행 전 반드시 워크플로우를 사용자에게 확인받는다
